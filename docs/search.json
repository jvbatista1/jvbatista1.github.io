[
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "My Blog",
    "section": "",
    "text": "Dungeons & Dragons\n\n\n\nTidytuesday\n\n\n\nQuais tipos de monstro possuem as melhores habilidades?\n\n\n\nVictor Batista\n\n\nMay 28, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nNotas sobre RDD\n\n\n\nResumos\n\n\n\nUm resumo das notas de Lehner (2024) a partir da minha experiência na dissertação de mestrado\n\n\n\nVictor Batista\n\n\nMay 26, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nSobre dados e mapas\n\n\n\nTidytuesday\n\n\n\nComo utilizar as atividades disponíveis pela comunidade para exercitar a análise de dados\n\n\n\nVictor Batista\n\n\nMay 13, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/20250526_lehnerrdd/index.html",
    "href": "posts/20250526_lehnerrdd/index.html",
    "title": "Notas sobre RDD",
    "section": "",
    "text": "Enquanto minha dissertação de mestrado não é publicada do repositório da universidade, quero compartilhar alguns pensamentos sobre a metodologia que eu apliquei para analisar meu fenômeno de interesse. Para verificar diferenças nos indicadores de violência de ambos os lados da Faixa de Fronteira brasileira, realizei um design de regressão descontínua (RDD em inglês) e recentemente Lehner (2024) publicou uma nota em seu site pessoal onde discorre um pouco sobre ferramentas no R para trabalhar com esse modelo em aplicações espaciais.\nBasicamente o RDD é aplicado quando temos um tratamento aplicado para as unidades apresentadas acima (ou abaixo) de um valor em uma variável contínua.\n\nOrigens e definição\nO RDD é uma metodologia de análise causal amplamente utilizada em contextos não experimentais, nos quais a alocação de um tratamento ou intervenção depende de um ponto de corte claramente definido em uma variável contínua. Thistlethwaite and Campbell (1960) introduziram essa metodologia na avaliação do impacto de prêmios de mérito escolar no futuro acadêmico dos estudantes (aspirações de carreira, engajamento em cursos de pós-graduação, etc.). Esse estudo explorou o fato de que os prêmios eram atribuídos com base em uma determinada nota: estudantes cuja pontuação \\(X\\) atingisse ou excedesse um valor de corte \\(c\\) eram agraciados, enquanto aqueles com pontuação inferior não eram contemplados. Esse mecanismo gera uma descontinuidade no tratamento como função da nota. Seja a recepção do tratamento representada por \\(D \\in {0,1}\\), temos então \\(D=1\\) se \\(X\\geq c\\) e \\(D=0\\) se \\(X&lt;c\\).\nAnalisando esse problema, não há razão para que a função que relaciona o futuro acadêmico (\\(Y\\)) e as notas (\\(X\\)) seja descontínua em qualquer ponto. Se uma descontinuidade for observada, a conclusão natural é que ela decorre da atribuição da intervenção no ponto de corte \\(c\\). Assumindo uma relação linear entre \\(Y\\) e \\(X\\), uma forma simples de estimar o efeito do tratamento pode ser expressa pela Equation 1. A intuição gráfica dessa relação está ilustrada na Figure 1.\n\\[\n    Y = \\alpha + D\\tau + X\\beta + \\varepsilon\n\\tag{1}\\]\n\n\n\n\n\n\nFigure 1: Exemplo de descontinuidade. Fonte: Lee and Lemieux (2010)\n\n\n\n\n\nAplicando em dados espaciais\nApesar de amplamente utilizado para identificar efeitos causais em contextos observacionais, a aplicação do RDD em dados espaciais enfrenta desafios metodológicos significativos, especialmente na análise de fronteiras. Estudos como os de Keele and Titiunik (2015), Kaza (2018) e Jardim et al. (2024) destacam as dificuldades inerentes à aplicação do RDD em contextos geográficos e propõem adaptações para aprimorar sua eficácia.\nUm dos primeiros trabalhos a explorar variações geográficas no RD foi Black (1999), que estimou a disposição a pagar por melhores escolas a partir da localização das residências dentro dos limites de determinados bairros.\nEntretanto, a aplicação geográfica do RD apresenta desafios inerentes à natureza dos dados. Os autores enfatizam que a validade da inferência depende da forma como as unidades são distribuídas ao longo das fronteiras geográficas. Além disso, destacam que a sobreposição de múltiplas fronteiras institucionais pode dificultar a inferência causal, pois diferentes tratamentos podem estar operando simultaneamente.\nO estudo de Zimmert and Zorn (2023), que investiga se os pagamentos diretos no setor agrícola afetam o emprego familiar nas fazendas suíças, com foco na participação da mão de obra feminina. O estudo examina como a descontinuidade espacial nas zonas agrícolas da Suíça impacta a alocação de trabalho nas fazendas.A estimação é realizada por Two-Stage Least Squares (TSLS), utilizando como variável instrumental a designação geográfica das zonas agrícolas.\nNeste trabalho, pode ser verificado a abordagem tradicional para RD espaciais, que a aproxima dos modelos clássicos de RD: a variável de corte é a menor distância do ponto de interesse (no caso, as fazendas) para o polígono. A Figure 2 mostra um exemplo ilustrativo de como a variável é calculada\n\n\n\n\n\n\nFigure 2: Exemplo de descontinuidade. Fonte: Zimmert and Zorn (2023)\n\n\n\n(lehner?) argumenta que, apesar de essa ser a forma mais intiuitiva e largamente adotada de conduzir um RDD, a aplicação nas fronteiras do mundo real requer atenção. Por exemplo, cidades podem estar muito próximas da fronteira (low score), mas muito distantes entre si, o que prejudica a comparabilidade. Para assegurar o ajuste da comparação, é proposto primeiro dividir a fronteira em vários segmentos menores, \\(\\mathcal B = \\cup\\{\\mathcal B_s \\}^{S}_{s=1}\\). Assim, para cada ponto \\(\\mathbf{x}_i\\) é computada a distância euclidiana para o segmento mais próximo \\(\\text{argmin } d(\\mathbf{x}_i, \\mathcal{B}_s)\\), resultando numa variável categórica que permite calcular efeitos fixos.\n\n\nLehner e o pacote spatialRDD\nPara exemplificar o procedimento anterior, vou utilizar o tutorial disponibilizado na vignette do pacote e replicar nos dados que trabalhei de segurança pública na fronteira brasileira.\nPrimeiro vamos importar os dados geográficos das sedes dos municípios em torno da faixa de fronteira e classificá-los em tratamento e controle. Como eu já tinha feito o preprocessamento das bases no meu trabalho, vou só importar os arquivos.\n\nespaciais &lt;- read_rds(file.path(dropbox, \"dados_espaciais.rds\"))\n\nfronteira_terrestre &lt;- read_rds(file.path(dropbox, \"fronteira_terrestre.rds\"))\n\ncut_off &lt;- read_rds(file.path(dropbox, \"fronteira_interior.rds\"))\n \nfull &lt;- st_union(espaciais)\n\nfull &lt;- st_remove_holes(full)\n\ntreated &lt;- st_union(filter(espaciais, groups == \"treatment\"))\ntreated &lt;- st_sf(treated)\ntreated &lt;- st_remove_holes(treated)\n\npoints &lt;- read_municipal_seat(year=2010, showProgress = T) %&gt;%\n  st_transform(\"WGS84\") |&gt; \n  rename(\"id_municipio\" = \"code_muni\",\n         \"nome\" = \"name_muni\",\n         \"id_uf\" = \"code_state\",\n         'sigla_uf' = \"abbrev_state\",\n         \"nome_regiao\" = \"name_region\",\n         \"id_regiao\" = \"code_region\",\n         \"ano\" = \"year\") |&gt; \n  mutate(id_municipio = as.character(id_municipio))\n\n\nDownloading: 10 B     \nDownloading: 10 B     \nDownloading: 40 kB     \nDownloading: 40 kB     \nDownloading: 40 kB     \nDownloading: 40 kB     \nDownloading: 57 kB     \nDownloading: 57 kB     \nDownloading: 65 kB     \nDownloading: 65 kB     \nDownloading: 81 kB     \nDownloading: 81 kB     \nDownloading: 81 kB     \nDownloading: 81 kB     \nDownloading: 81 kB     \nDownloading: 81 kB     \nDownloading: 120 kB     \nDownloading: 120 kB     \nDownloading: 120 kB     \nDownloading: 120 kB     \nDownloading: 160 kB     \nDownloading: 160 kB     \nDownloading: 160 kB     \nDownloading: 160 kB     \nDownloading: 200 kB     \nDownloading: 200 kB     \nDownloading: 200 kB     \nDownloading: 200 kB     \nDownloading: 200 kB     \nDownloading: 200 kB     \nDownloading: 220 kB     \nDownloading: 220 kB     \nDownloading: 220 kB     \nDownloading: 220 kB     \nDownloading: 230 kB     \nDownloading: 230 kB     \nDownloading: 230 kB     \nDownloading: 230 kB     \nDownloading: 250 kB     \nDownloading: 250 kB     \nDownloading: 250 kB     \nDownloading: 250 kB     \nDownloading: 250 kB     \nDownloading: 250 kB     \nDownloading: 260 kB     \nDownloading: 260 kB     \nDownloading: 290 kB     \nDownloading: 290 kB     \nDownloading: 290 kB     \nDownloading: 290 kB     \nDownloading: 310 kB     \nDownloading: 310 kB     \nDownloading: 310 kB     \nDownloading: 310 kB     \n\nt &lt;- select(espaciais, id_municipio, groups)\nst_geometry(t) &lt;- NULL\n\npoints &lt;- points |&gt; \n  right_join(t, by=\"id_municipio\")\n\nrm(t)\n\nUtilizando o geom_sf() pra construir a visualização. E sim, sou um grande partidário de utilizar paletas de cores de Pokémon com o Palettetown.\n\nggplot()+\n  geom_sf(data = full, fill = \"lightgray\")+\n  geom_sf(data =  treated, , fill = \"gray\")+\n  geom_sf(data = cut_off, color = \"red\")+\n  geom_sf(data = points, mapping = aes(colour = groups), size = 0.1) +\n  scale_color_poke(pokemon = 'charizard', spread = 2, name = \"Grupo\", labels = c(\"Controle\", \"Tratamento\"))+\n  theme_minimal()\n\n\n\n\n\n\n\n\nAqui eu adiciono minha variável de interesse, que é a taxa municipal de homicídios em 2019. Além disso, crio uma variável da distância eucilidiana para o cutoff, conforme descrito na seção anterior.\n\nviolencia &lt;- read_rds(file.path(dropbox, \"municipal.rds\")) |&gt;\n  filter(!is.na(id_municipio)) |&gt; \n  select(id_municipio, valor_2019)\n\npoints &lt;- points |&gt; \n  left_join(violencia)\n\npoints$dist2cutoff &lt;- as.numeric(sf::st_distance(points, cut_off))\npoints$distrunning &lt;- points$dist2cutoff\n# give the non-treated one's a negative score\npoints$distrunning[points$groups == \"control\"] &lt;- -1 * points$distrunning[points$groups == \"control\"]\n\nAqui é o resultado dos estimadores OLS utilizando somente a variável dummy do tratamento e utilizando um RDD simples utilizando somente a distância unidimensional\n\nlist(lm(valor_2019 ~ groups, data = points)) |&gt; \n  stargazer::stargazer(type = \"text\")\n\n\n===============================================\n                        Dependent variable:    \n                    ---------------------------\n                            valor_2019         \n-----------------------------------------------\ngroupstreatment                0.711           \n                              (1.147)          \n                                               \nConstant                     15.109***         \n                              (0.828)          \n                                               \n-----------------------------------------------\nObservations                   1,128           \nR2                            0.0003           \nAdjusted R2                   -0.001           \nResidual Std. Error     19.237 (df = 1126)     \nF Statistic            0.385 (df = 1; 1126)    \n===============================================\nNote:               *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01\n\nsummary(rdrobust(points$valor_2019, points$distrunning, c = 0))\n\nSharp RD estimates using local polynomial regression.\n\nNumber of Obs.                 1128\nBW type                       mserd\nKernel                   Triangular\nVCE method                       NN\n\nNumber of Obs.                  540          588\nEff. Number of Obs.             196          116\nOrder est. (p)                    1            1\nOrder bias  (q)                   2            2\nBW est. (h)               31802.103    31802.103\nBW bias (b)               63208.136    63208.136\nrho (h/b)                     0.503        0.503\nUnique Obs.                     540          588\n\n=============================================================================\n        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       \n=============================================================================\n  Conventional    -7.845     4.007    -1.958     0.050   [-15.700 , 0.009]     \n        Robust         -         -    -2.132     0.033   [-18.828 , -0.791]    \n=============================================================================\n\n\nAgora, criamos a segmentação para adicionar efeitos fixos na análise. É comum escolher diversas segmentações para testar o ajuste da regressão, caso alguma das categorias fique subrepresentada, com poucas (ou nenhuma) observação em um dos lados do cutoff.\n\ncut_off_test &lt;- sf::st_cast(st_as_sf(cut_off), \"MULTIPOINT\")\n\npoints$segment5 &lt;- border_segment(points, cut_off_test, 5)\npoints$segment10 &lt;- border_segment(points, cut_off_test, 10)\npoints$segment15 &lt;- border_segment(points, cut_off_test, 15)\ntm_shape(points) + tm_dots(\"segment5\", size = 0.1) + tm_shape(cut_off) + tm_lines()\n\nWarning: The shape points contains empty units.\n\n\n\n\n\n\n\n\ntm_shape(points) + tm_dots(\"segment10\", size = 0.1) + tm_shape(cut_off) + tm_lines()\n\nWarning: The shape points contains empty units.\n\n\n\n\n\n\n\n\ntm_shape(points) + tm_dots(\"segment15\", size = 0.1) + tm_shape(cut_off) + tm_lines()\n\nWarning: The shape points contains empty units.\n\n\n\n\n\n\n\n\n\nEssees são os resultados da estimação com efeitos fixos utilizando as segmentações.\n\nlibrary(lfe)\n#&gt; Loading required package: Matrix\nlist(lfe::felm(valor_2019 ~ groups | factor(segment5) | 0 | 0, data = points[points$dist2cutoff &lt; 3000, ]),\n  lfe::felm(valor_2019 ~ groups | factor(segment10) | 0 | 0, data = points[points$dist2cutoff &lt; 3000, ]),\n  lfe::felm(valor_2019 ~ groups | factor(segment15) | 0 | 0, data = points[points$dist2cutoff &lt; 3000, ])) %&gt;% \n  modelsummary::modelsummary(type = \"text\", stars = T)\n\n \n\n  \n    \n    \n    tinytable_xoq8jxj3mcepdyv05i92\n    \n    \n    \n    \n  \n\n  \n    \n      \n        \n        \n              \n                 \n                (1)\n                (2)\n                (3)\n              \n        \n        + p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001\n        \n                \n                  groupstreatment\n                  -15.762 \n                  -23.028+\n                  -25.107+\n                \n                \n                                 \n                  (13.070)\n                  (11.860)\n                  (13.821)\n                \n                \n                  Num.Obs.       \n                  23      \n                  23      \n                  23      \n                \n                \n                  R2             \n                  0.240   \n                  0.430   \n                  0.446   \n                \n                \n                  R2 Adj.        \n                  0.017   \n                  0.163   \n                  0.062   \n                \n                \n                  AIC            \n                  221.0   \n                  218.4   \n                  221.7   \n                \n                \n                  BIC            \n                  228.9   \n                  228.6   \n                  234.2   \n                \n                \n                  RMSE           \n                  21.76   \n                  18.85   \n                  18.59   \n                \n        \n      \n    \n\n    \n\n  \n\n\n\n\n\n\nConclusão\nO preprint de Alexander Lehner mostra algumas outras ferramentas para aplicão de RDD espacial, em particular Geographic Regression Discontinuity (GRD) (Keele and Titiunik (2015)), que tem uma variação bem sutil na segmentação dos pontos em relação ao cutoff. Mas o que gostaria de destacar desse trabalho fabuloso é como adicionar efeitos fixos ajuda a realizar a identificação correta do efeito do tratamento através da comparação correta entre as unidades analisadas. Na minha dissertação fiz isso de um modo um pouco diferente, espero poder compartilhar com mais detalhes no futuro, mas por hora fico feliz de revisitar esses dados sob uma perspectiva nova.\n\n\n\n\n\nReferences\n\nBlack, Sandra E. 1999. “Do Better Schools Matter? Parental Valuation of Elementary Education.” The Quarterly Journal of Economics 114 (2): 577–99. http://www.jstor.org/stable/2587017.\n\n\nJardim, Ekaterina, Mark C. Long, Robert Plotnick, Jacob Vigdor, and Emma Wiles. 2024. “Local Minimum Wage Laws, Boundary Discontinuity Methods, and Policy Spillovers.” Journal of Public Economics 234 (June): 105131. https://doi.org/10.1016/j.jpubeco.2024.105131.\n\n\nKaza, Nikhil. 2018. “Spatial Regression Discontinuity Design Setup.” Blog. Nikhil Kaza. https://nkaza.github.io/post/spatial-regression-discontinuity-design-setup/.\n\n\nKeele, Luke J., and Rocío Titiunik. 2015. “Geographic Boundaries as Regression Discontinuities.” Political Analysis 23 (1): 127–55. https://doi.org/10.1093/pan/mpu014.\n\n\nLee, David S, and Thomas Lemieux. 2010. “Regression Discontinuity Designs in Economics.” Journal of Economic Literature 48 (2): 281–355. https://doi.org/10.1257/jel.48.2.281.\n\n\nLehner, Alexander. 2024. “A Note on Spatial Regression Discontinuity Designs.” https://lehner.xyz/pdf/Lehner_SpatialRDDnote.pdf.\n\n\nThistlethwaite, Donald L., and Donald T. Campbell. 1960. “Regression-Discontinuity Analysis: An Alternative to the Ex Post Facto Experiment.” Journal of Educational Psychology 51 (6): 309–17. https://doi.org/10.1037/h0044319.\n\n\nZimmert, Franziska, and Alexander Zorn. 2023. “Direct Payments and on-Farm Employment: Evidence from a Spatial Regression Discontinuity Design.” Q Open 3 (3): qoac024. https://doi.org/10.1093/qopen/qoac024.\n\nCitationBibTeX citation:@online{batista2025,\n  author = {Batista, Victor},\n  title = {Notas Sobre {RDD}},\n  date = {2025-05-26},\n  url = {https://jvbatista1.github.io/posts/20250526_lehnerrdd/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nBatista, Victor. 2025. “Notas Sobre RDD.” May 26, 2025. https://jvbatista1.github.io/posts/20250526_lehnerrdd/."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Victor Batista",
    "section": "",
    "text": "Eu sou o Victor, muito prazer. Espero partilhar informações sobre mim que possam ajudar a nos conhecer melhor.\n\n\n\nMestre em Economia (2025) | Programa de pós-graduação em economia da Universidade Federal do Ceará (CAEN/UFC) | Fortaleza, CE, Brasil\nBacharel em Ciências Econômicas (2022) | Universidade Federal do Ceará (UFC) | Fortaleza, CE, Brasil\nTécnico em Telecomunicações (2015) | Instituto Federal de Educação, Ciência e Tecnologia do Ceará (IFCE) | Fortaleza, CE, Brasil\n\n\n\n\n\n\nPrograma de Pós-Graduação em Economia da Universidade Federal do Ceará · Tempo integral\njun de 2021 - dez de 2022\nTrabalhando na pesquisa “Entendendo os impactos da COVID-19 na violência doméstica e familiar contra a Mulher no Brasil”, chefiada pelo prof. José Raimundo Carvalho (CAEN-UFC) e patrocinada por The Sexual Violence Research Initiative (SVRI). Serviços de gestão de cronograma, orçamento, relações internacionais e demais demandas pertinentes à pesquisa desenvolvida.Trabalhando na pesquisa “Entendendo os impactos da COVID-19 na violência doméstica e familiar contra a Mulher no Brasil”, chefiada pelo prof. José Raimundo Carvalho (CAEN-UFC) e patrocinada por The Sexual Violence Research Initiative (SVRI). Serviços de gestão de cronograma, orçamento, relações internacionais e demais demandas pertinentes à pesquisa desenvolvida.\nCompetências: Modelagem estatística · Metodologias de pesquisas qualitativas e quantitativas · Visualização de dados · Python · R (linguagem de programação)\n\n\n\nGrupo Completta Telecom\nfev de 2017 - jun de 2021 · 4 anos 5 meses\nElaboração de projetos georreferenciados para instalação de estruturas de telecomunicações\nProcessos de outorga e licenciamento de vários tipos de serviços de telecomunicações\nConsulta e acompanhamento da legislação sobre o tema\nAtendimento ao cliente e suporte em obrigações mensais para com a Anatel\nPesquisa e implementação de soluções de acordo com a necessidade dos clientesElaboração de projetos georreferenciados para instalação de estruturas de telecomunicações Processos de outorga e licenciamento de vários tipos de serviços de telecomunicações Consulta e acompanhamento da legislação sobre o tema Atendimento ao cliente e suporte em obrigações mensais para com a Anatel Pesquisa e implementação de soluções de acordo com a necessidade dos clientes\nCompetências: Atendimento ao cliente · Gestão de projetos · AutoCAD · Microsoft Office"
  },
  {
    "objectID": "index.html#educação",
    "href": "index.html#educação",
    "title": "Victor Batista",
    "section": "",
    "text": "Mestre em Economia (2025) | Programa de pós-graduação em economia da Universidade Federal do Ceará (CAEN/UFC) | Fortaleza, CE, Brasil\nBacharel em Ciências Econômicas (2022) | Universidade Federal do Ceará (UFC) | Fortaleza, CE, Brasil\nTécnico em Telecomunicações (2015) | Instituto Federal de Educação, Ciência e Tecnologia do Ceará (IFCE) | Fortaleza, CE, Brasil"
  },
  {
    "objectID": "index.html#experiência-profissional",
    "href": "index.html#experiência-profissional",
    "title": "Victor Batista",
    "section": "",
    "text": "Programa de Pós-Graduação em Economia da Universidade Federal do Ceará · Tempo integral\njun de 2021 - dez de 2022\nTrabalhando na pesquisa “Entendendo os impactos da COVID-19 na violência doméstica e familiar contra a Mulher no Brasil”, chefiada pelo prof. José Raimundo Carvalho (CAEN-UFC) e patrocinada por The Sexual Violence Research Initiative (SVRI). Serviços de gestão de cronograma, orçamento, relações internacionais e demais demandas pertinentes à pesquisa desenvolvida.Trabalhando na pesquisa “Entendendo os impactos da COVID-19 na violência doméstica e familiar contra a Mulher no Brasil”, chefiada pelo prof. José Raimundo Carvalho (CAEN-UFC) e patrocinada por The Sexual Violence Research Initiative (SVRI). Serviços de gestão de cronograma, orçamento, relações internacionais e demais demandas pertinentes à pesquisa desenvolvida.\nCompetências: Modelagem estatística · Metodologias de pesquisas qualitativas e quantitativas · Visualização de dados · Python · R (linguagem de programação)\n\n\n\nGrupo Completta Telecom\nfev de 2017 - jun de 2021 · 4 anos 5 meses\nElaboração de projetos georreferenciados para instalação de estruturas de telecomunicações\nProcessos de outorga e licenciamento de vários tipos de serviços de telecomunicações\nConsulta e acompanhamento da legislação sobre o tema\nAtendimento ao cliente e suporte em obrigações mensais para com a Anatel\nPesquisa e implementação de soluções de acordo com a necessidade dos clientesElaboração de projetos georreferenciados para instalação de estruturas de telecomunicações Processos de outorga e licenciamento de vários tipos de serviços de telecomunicações Consulta e acompanhamento da legislação sobre o tema Atendimento ao cliente e suporte em obrigações mensais para com a Anatel Pesquisa e implementação de soluções de acordo com a necessidade dos clientes\nCompetências: Atendimento ao cliente · Gestão de projetos · AutoCAD · Microsoft Office"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Materiais",
    "section": "",
    "text": "Teste\n\nPresentation"
  },
  {
    "objectID": "posts/20250513_vesuvius/index.html",
    "href": "posts/20250513_vesuvius/index.html",
    "title": "Sobre dados e mapas",
    "section": "",
    "text": "Percebi que nos últimos tempos tenho acessado uma parte interessante da internet: muitos membros da comunidade de analistas e engenheiros de dados não somente produzem muito conteúdo interessante mas também fazem de tudo para registrar e compartilhar a informação sobre suas áreas de atuação. É verdade que desde a graduação tenho consumido muito desses conteúdos como forma de resolver demandas, mas na nova fase da vida, com o fim do mestrado, meu interesse tem mudado um pouco.\nAgora, eu sinto que posso dar um passo e participar da comunidade também compartilhando coisas que eu sei. De fato, tenho muito que aprender, principalmente quando me comparo com profissionais tão legais e experientes, mas esse blog também vai ajudar nesse ponto. Expondo minhas ideias e meus trabalhos até aqui posso ir superando dois desafios:\n\nMe dou a oportunidade da comunidade contribuir com sugestões para melhorar no que me proponho\nFaço um registro do meu caminho nessa carreira de analista para o futuro\n\nUma das atividades que mais admiro é o Tidytuesday, composto por desafios semanais onde é fornecida uma base e quem participa deve elaborar uma visualização e postar nas redes. Essa semana, os dados fornecidos são sobre as erupções do Monte Vesúvio na década passada. Vamos ver o que consegui fazer.\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(ggmap)\n\nÉ possível baixar diretamente os dados pelo pacote do desafio\n\ndata &lt;-  tidytuesdayR::tt_load(\"2025-05-13\")\n\n---- Compiling #TidyTuesday Information for 2025-05-13 ----\n--- There is 1 file available ---\n\n\n── Downloading files ───────────────────────────────────────────────────────────\n\n  1 of 1: \"vesuvius.csv\"\n\nvesuvius &lt;- data$vesuvius\n\nÉ possível fazer uma exploração básica com o pacote modelsummary.\n\nmodelsummary::datasummary_skim(vesuvius)\n\n\n\n    \n\n    \n    \n      \n        \n        \n              \n                \n                Unique\n                Missing Pct.\n                Mean\n                SD\n                Min\n                Median\n                Max\n                Histogram\n              \n        \n        \n        \n                \n                  event_id\n                  12027\n                  0\n                  15494.1\n                  11014.2\n                  102.0\n                  14981.0\n                  40802.0\n                  \n                \n                \n                  latitude\n                  344\n                  29\n                  40.8\n                  0.0\n                  40.8\n                  40.8\n                  40.9\n                  \n                \n                \n                  longitude\n                  391\n                  29\n                  14.4\n                  0.0\n                  14.3\n                  14.4\n                  14.5\n                  \n                \n                \n                  depth_km\n                  291\n                  29\n                  0.4\n                  0.5\n                  0.0\n                  0.2\n                  9.3\n                  \n                \n                \n                  duration_magnitude_md\n                  117\n                  3\n                  0.2\n                  0.6\n                  -2.0\n                  0.1\n                  3.1\n                  \n                \n                \n                  md_error\n                  2\n                  3\n                  0.3\n                  0.0\n                  0.3\n                  0.3\n                  0.3\n                  \n                \n                \n                  year\n                  14\n                  0\n                  2018.9\n                  3.3\n                  2011.0\n                  2019.0\n                  2024.0\n                  \n                \n                \n                   \n                    \n                  N\n                  %\n                  \n                  \n                  \n                  \n                  \n                \n                \n                  \n                  Mount Vesuvius\n                  12027\n                  100.0\n                  \n                  \n                  \n                  \n                  \n                \n                \n                  \n                  earthquake\n                  12027\n                  100.0\n                  \n                  \n                  \n                  \n                  \n                \n                \n                  review_level\n                  preliminary\n                  12025\n                  100.0\n                  \n                  \n                  \n                  \n                  \n                \n                \n                  \n                  revised\n                  2\n                  0.0\n                  \n                  \n                  \n                  \n                  \n                \n        \n      \n    \n\n\n\nA proposta não é necessariamente criar modelos causais ou preditivos, mas escolhi retirar as observações de 2011 e 2012 para melhorar a visualização dos mapas.\n\nvesuvius |&gt; \n  count(year)\n\n# A tibble: 14 × 2\n    year     n\n   &lt;dbl&gt; &lt;int&gt;\n 1  2011     1\n 2  2012     1\n 3  2013   594\n 4  2014   749\n 5  2015  1018\n 6  2016   915\n 7  2017   937\n 8  2018  1316\n 9  2019  1231\n10  2020  1198\n11  2021  1034\n12  2022   853\n13  2023   865\n14  2024  1315\n\nvesuvius &lt;- vesuvius |&gt; \n  filter(year&gt;2012)\n\nQueria testar uma visualização 3d para verificar a profundidade do epicentro das erupções. O pacote que eu gosto para esse tipo de visualização é o plotly. Infelizmente não tenho muita intimidade com ele, o que fez esse gráfico ser bonito, mas não muito informativo.\n\nfig &lt;- plot_ly(vesuvius, x = ~latitude, y = ~longitude, z = ~depth_km,\n               marker = list(color = ~year, colorscale = c('#FFE1A1', '#683531'), showscale = TRUE))\nfig &lt;- fig %&gt;% add_markers()\nfig &lt;- fig %&gt;% layout(scene = list(xaxis = list(title = 'Latitude'),\n                     yaxis = list(title = 'Longitude'),\n                     zaxis = list(title = 'Depth (km)')))\n\nfig\n\nWarning: Ignoring 3433 observations\n\n\n\n\n\n\nA versão final e, portanto, a escolhida para representar minha primeira participação no Tidytuesday é o gráfico abaixo, que usei o ggmap para mesclar um mapa real junto com o scatterplot da latitude e longitude, mostrando a variação da profundidade dos impactos por ano.\n\nvesuvius_map &lt;- c(left = 14.3, bottom = 40.75, right = 14.5, top = 40.87)\nget_stadiamap(vesuvius_map, zoom = 12, maptype = \"stamen_terrain\") |&gt; \n  ggmap()+\n  geom_point(aes(longitude, latitude, color=depth_km), data=(filter(vesuvius, year&gt;2012)), size = .5, alpha = .5)+\n  facet_wrap(~year)+\n  labs(x = \"longitude\", y = \"latitude\", title = \"Depth of eruptions by Vesuvius\")\n\nℹ © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.\n\n\nWarning: Removed 3433 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\nMesmo não levando a conclusões mirabolantes (porque eu estava esperando que em 10 anos a profundidade das erupções mudasse?) gostei de aplicar essas ferramentas que usei durante minha graduação num problema prático. Tudo isso foi relativamente rápido de fazer e espero continuar contribuindo.\n\n\n\nCitationBibTeX citation:@online{batista2025,\n  author = {Batista, Victor},\n  title = {Sobre Dados e Mapas},\n  date = {2025-05-13},\n  url = {https://jvbatista1.github.io/posts/20250513_vesuvius/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nBatista, Victor. 2025. “Sobre Dados e Mapas.” May 13, 2025.\nhttps://jvbatista1.github.io/posts/20250513_vesuvius/."
  },
  {
    "objectID": "posts/20250528_ddmonsters/index.html",
    "href": "posts/20250528_ddmonsters/index.html",
    "title": "Dungeons & Dragons",
    "section": "",
    "text": "No desafio do Tidytuesday foi apresentada uma base com os monstros de Dungeons and Dragons e seus atributos (stats). Uma das questões propostas é verificar quais tipos de monstros possuem os melhores scores.\nA solução que achei adequada para verificar rapidamente tanto os scores quanto o tipo de monstro foi criar um mapa de calor. Utilizando Seaborn e Matplotlib, cheguei ao resultado abaixo. O primeiro passo foi baixar a base e selecionar as variáveis de interesse:\n\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nmonsters = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-05-27/monsters.csv')\n\nattributes = ['str', 'dex', 'con', 'int', 'wis', 'cha']\ndf = monsters[['type'] + attributes]\n\nprint(df.isnull().sum())\n\n# df = df.dropna(subset=['type'] + attributes)\n\nsummary = df.groupby('type')[attributes].mean().reset_index()\nfreq = df['type'].value_counts().sort_index()\n\nprint(summary)\n\ntype    0\nstr     0\ndex     0\ncon     0\nint     0\nwis     0\ncha     0\ndtype: int64\n                    type        str        dex        con        int  \\\n0             Aberration  16.333333  11.000000  14.555556   7.333333   \n1                  Beast  12.726190  12.976190  12.714286   2.202381   \n2              Celestial  17.923077  16.846154  16.923077  14.615385   \n3              Construct  17.000000  11.000000  16.000000   3.700000   \n4                 Dragon  21.622222  11.377778  20.044444  13.688889   \n5              Elemental  13.529412  13.529412  15.411765   9.294118   \n6                    Fey  12.733333  14.266667  12.400000  10.800000   \n7                  Fiend  16.275862  14.586207  16.448276  12.448276   \n8                  Giant  22.400000  10.600000  18.800000   8.100000   \n9               Humanoid  13.038462  13.346154  12.923077  11.384615   \n10           Monstrosity  16.891892  13.027027  16.135135   5.864865   \n11                  Ooze  14.250000   5.000000  16.500000   1.250000   \n12                 Plant  11.166667   5.333333  13.833333   6.500000   \n13  Swarm of Tiny Beasts   7.333333  14.500000  10.833333   2.000000   \n14  Swarm of Tiny Undead  14.000000  14.000000  11.000000   5.000000   \n15                Undead  12.333333  13.888889  14.277778   9.166667   \n\n          wis        cha  \n0   12.333333   7.111111  \n1   10.988095   5.083333  \n2   17.923077  16.692308  \n3    8.300000   2.800000  \n4   12.977778  17.400000  \n5   11.588235  10.705882  \n6   11.200000  11.200000  \n7   13.310345  14.482759  \n8   11.600000   9.700000  \n9   12.230769  12.269231  \n10  11.810811   8.594595  \n11   6.000000   1.250000  \n12   8.666667   5.333333  \n13   9.666667   3.166667  \n14  10.000000   4.000000  \n15  11.055556  10.555556  \n\n\nMinhas escolhas de customização do gráfico (com ajuda do chat GPT, claro) foram: - Utilizar o rcParams pra configurar as fontes utilizadas - Dividir o gráfico em duas partes (ax1, ax2) para inserir um gráfico auxiliar, mostrando a frequencia dos monstros em cada tipo - Para um gráfico isolado, acho interessante utilizar uma outra cor de fundo que não seja branca\n\nsns.set_theme(style=\"whitegrid\")\nplt.rcParams.update({'font.size': 10, 'font.family': 'sans-serif', 'font.sans-serif': 'Tahoma'})\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 8),\n                               gridspec_kw={'width_ratios': [4, 1]}, sharey=True)\nfig.patch.set_facecolor('#fff8dc')  \n# Heatmap\nsns.heatmap(summary.set_index('type'),\n            annot=True, fmt=\".1f\",\n            cmap='bwr',\n            cbar=False,\n            annot_kws={\"size\":8, \"color\":\"black\"},\n            ax=ax1)\n\nax1.set_title('Average Ability Scores', fontsize=30, fontweight='bold', pad=15)\nax1.set_ylabel('Monster Type', fontsize=12)\nax1.set_xlabel('Ability Score', fontsize=12)\n\n# Barra de frequência\nax2.barh(freq.index, freq.values,\n         color='#888888',\n         edgecolor='black',\n         alpha=0.8)\n\nax2.set_title('Frequency', fontsize=16, fontweight='bold', pad=15)\nax2.set_xlabel('Count', fontsize=12)\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\nEssa é minha primeira experiência utilizando Python para um projeto pessoal. Tive um pouco de trabalho para configurar os chunks, uma vez que estou escrevendo este blog em Quarto, mas no fim deu tudo certo. As configurações do Seaborn são muito intuitivas para customização, embora eu tenha precisado de ajuda para lembrar todas elas direitinho.\nMeu objetivo, no futuro, é encontrar uma identidade visual para esses projetos que realizo como exercício. Existem projetos na comunidade que acho incríveis, como o MEDS (que inclusive é a grande inpiração desse blog) e Latinometrics. São sites muito bonitos e agradáveis de acompanhar, tanto pelas suas escolhas estéticas quanto pela alta qualidade das análises.\nSe eu conseguir chegar, pelo menos, perto do que eles fazem, já ficarei muito feliz!\n\n\n\nCitationBibTeX citation:@online{batista2025,\n  author = {Batista, Victor},\n  title = {Dungeons \\& {Dragons}},\n  date = {2025-05-28},\n  url = {https://jvbatista1.github.io/posts/20250528_ddmonsters/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nBatista, Victor. 2025. “Dungeons & Dragons.” May 28,\n2025. https://jvbatista1.github.io/posts/20250528_ddmonsters/."
  }
]